%nav.fixed.bottom-0.left-0.right-0.z-50.bg-white.backdrop-blur-sm.border-t.border-gray-200.md:top-0.md:left-0.md:right-auto.md:h-screen.md:w-sidebar.md:border-r.md:border-t-0.md:px-4.md:py-6
  .flex.flex-row.justify-around.items-center.py-2.max-w-80.mx-auto.md:flex-col.md:justify-start.md:gap-3.md:h-full.md:py-0
    = link_to root_path, class: 'nav-link' do
      = image_tag 'icon_home.svg', class: 'size-6 md:size-5', alt: 'Home'
      %span.hidden.md:inline= I18n.t('gnav.home')

    = link_to explore_path, class: 'nav-link' do
      = image_tag 'icon_explore.svg', class: 'size-6 md:size-5', alt: 'Explore'
      %span.hidden.md:inline= I18n.t('gnav.explore')

    = link_to new_post_path, class: 'nav-link' do
      = image_tag 'icon_post.svg', class: 'size-6 md:size-5', alt: t('gnav.post')
      %span.hidden.md:inline= I18n.t('gnav.post')

    %el-dropdown.md:mt-auto.md:w-full
      %button.nav-link.md:gap-3.md:max-w-full.w-full{ type: 'button' }
        = image_tag current_user.avatar_url, class: 'size-8 rounded-full object-cover flex-shrink-0', alt: current_user.name
        .min-w-0.text-left.hidden.md:flex.md:flex-col
          %span.truncate= current_user.name
          %span.text-xs.text-gray-500.truncate= current_user.email
      :ruby
        menu_classes = 'w-64 origin-bottom-left mb-2 bg-white rounded-2xl shadow-xl border border-gray-200 transition [--anchor-gap:0.5rem] ' \
                       'data-closed:scale-95 data-closed:opacity-0 data-enter:duration-200 data-enter:ease-out ' \
                       'data-leave:duration-150 data-leave:ease-in'
      %el-menu{ anchor: 'top start', popover: true, class: menu_classes }
        .p-4.space-y-4
          %div
            %p.text-xs.font-semibold.text-gray-600.mb-2= t('drawer.language')
            .flex.gap-2
              :ruby
                base_classes = 'flex-1 px-3 py-2 text-sm rounded-lg text-center transition-colors focus:outline-hidden'
                active_classes = 'bg-blue-500 text-white'
                inactive_classes = 'bg-gray-100 text-gray-700 hover:bg-gray-200 focus:bg-gray-200'
              = link_to url_for(locale: :en), class: "#{base_classes} #{I18n.locale == :en ? active_classes : inactive_classes}" do
                %span= t('languages.en')
              = link_to url_for(locale: :ja), class: "#{base_classes} #{I18n.locale == :ja ? active_classes : inactive_classes}" do
                %span= t('languages.ja')
          %hr.border-t.border-gray-200
          .space-y-1
            = link_to account_path(current_user.name), class: 'flex items-center gap-2 px-3 py-2 rounded-lg hover:bg-gray-100 focus:bg-gray-100 transition-colors text-sm focus:outline-hidden' do
              = image_tag 'icon_profile.svg', class: 'size-4', alt: 'Profile'
              %span.text-gray-700= t('drawer.my_page')
            = button_to destroy_user_session_path, method: :delete,
                        class: 'w-full flex items-center gap-2 px-3 py-2 rounded-lg hover:bg-red-50 focus:bg-red-50 text-red-600 transition-colors text-sm focus:outline-hidden' do
              = image_tag 'icon_logout.svg', class: 'size-4', alt: 'Logout'
              %span= t('drawer.logout')
